<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Online file storage</title>
</head>
<body>
 <link rel="stylesheet" href="style.css">
</body>
</html>
<div id="container">
    <h1>Online File Storage</h1>
     
    <fieldset>
        <legend>Add a new file to the storage</legend>
        <form method="post" action="index.php" enctype="multipart/form-data">
        <input type="hidden" name="MAX_FILE_SIZE" value="100000" />
        <p><label for="name">Select file</label><br />
        <input type="file" name="file" /></p>
        <p><label for="password">Password for upload</label><br />
        <input type="password" name="password" /></p>
        <p><input type="submit" name="submit" value="Start upload" /></p>
        </form>   
    </fieldset>
</div>
<fieldset>
    <legend>Previousely uploaded files</legend>
    <ul id="menu">
        <li><a href="">All files</a></li>
        <li><a href="">Documents</a></li>
        <li><a href="">Images</a></li>
        <li><a href="">Applications</a></li>
    </ul>
     
    <ul id="files">
    </ul>
</fieldset>
<style type="text/css" media="all"> 
    @import url("style/style.css");
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<?php
/**
 * Class Settings holds the upload settings
 *
 */
class Settings
{
    static $password = "mypassword";
    static $uploadFolder = "uploads/";
}
?>
//Has the user uploaded something?
if(isset($_FILES['file']))
{
$target_path = Settings::$uploadFolder;
$target_path = $target_path . time() . '_' . basename( $_FILES['file']['name']);
//Check the password to verify legal upload
if($_POST['password'] != Settings::$password)
{
    $message = "Invalid Password!";
}
else
{
        //Try to move the uploaded file into the designated folder
        if(move_uploaded_file($_FILES['file']['tmp_name'], $target_path)) {
            $message = "The file ".  basename( $_FILES['file']['name']). 
            " has been uploaded";
        } else{
            $message = "There was an error uploading the file, please try again!";
        }
    }
}
if(strlen($message) > 0)
{
    $message = '<p class="error">' . $message . '</p>';
}
/** LIST UPLOADED FILES **/
$uploaded_files = "";
 
//Open directory for reading
$dh = opendir(Settings::$uploadFolder);
